<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Live Charts - Real-Time Price Tracker</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .glow {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
        }
        .glow-orange {
            box-shadow: 0 0 20px rgba(249, 115, 22, 0.3);
        }
        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white min-h-screen p-4 md:p-8">
    <div class="max-w-7xl mx-auto space-y-12">
        
        <!-- Ethereum Section -->
        <div>
            <!-- Header Section -->
            <div class="mb-8 backdrop-blur-sm bg-gray-800/50 rounded-2xl p-6 border border-gray-700 glow">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <span class="text-2xl font-bold">Îž</span>
                        </div>
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">
                                Ethereum
                            </h1>
                            <p class="text-gray-400 text-sm">ETH/USDT</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></div>
                        <span class="text-xs text-gray-400" id="ethStatusMsg">Live</span>
                    </div>
                </div>
                
                <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
                    <div>
                        <p class="text-5xl md:text-6xl font-bold mb-2" id="ethCurrentPrice">
                            <span class="text-gray-500">$</span>---
                        </p>
                        <div class="flex items-center gap-3">
                            <span class="text-xl font-semibold px-3 py-1 rounded-lg" id="ethPriceChange"></span>
                            <span class="text-sm text-gray-400">24h Change</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-xs text-gray-500 mb-1">Last Updated</p>
                        <p class="text-sm font-mono text-gray-300" id="ethLastUpdate">--:--:--</p>
                        <p class="text-xs text-gray-500 mt-2">Data Points: <span class="text-indigo-400 font-semibold" id="ethDataCount">0</span></p>
                    </div>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="backdrop-blur-sm bg-gray-800/50 rounded-2xl p-6 border border-gray-700 glow">
                <div class="mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                    <h2 class="text-xl font-semibold text-gray-300">Price Chart</h2>
                    <div class="flex items-center gap-2 flex-wrap">
                        <!-- Timeframe Selector -->
                        <div class="flex items-center gap-1 bg-gray-700/50 rounded-lg p-1">
                            <button onclick="changeEthTimeframe('1m')" id="ethBtn1m" class="timeframe-btn active px-3 py-1 rounded-md text-xs font-medium transition-all">1m</button>
                            <button onclick="changeEthTimeframe('5m')" id="ethBtn5m" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">5m</button>
                            <button onclick="changeEthTimeframe('15m')" id="ethBtn15m" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">15m</button>
                            <button onclick="changeEthTimeframe('1h')" id="ethBtn1h" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">1h</button>
                        </div>
                        <span class="px-2 py-1 bg-indigo-500/20 rounded-md text-indigo-400 text-xs">Live Updates</span>
                    </div>
                </div>
                <div class="relative">
                    <canvas id="ethChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Bitcoin Section -->
        <div>
            <!-- Header Section -->
            <div class="mb-8 backdrop-blur-sm bg-gray-800/50 rounded-2xl p-6 border border-gray-700 glow-orange">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-yellow-600 rounded-xl flex items-center justify-center">
                            <span class="text-2xl font-bold">â‚¿</span>
                        </div>
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-orange-400 to-yellow-400 bg-clip-text text-transparent">
                                Bitcoin
                            </h1>
                            <p class="text-gray-400 text-sm">BTC/USDT</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></div>
                        <span class="text-xs text-gray-400" id="btcStatusMsg">Live</span>
                    </div>
                </div>
                
                <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
                    <div>
                        <p class="text-5xl md:text-6xl font-bold mb-2" id="btcCurrentPrice">
                            <span class="text-gray-500">$</span>---
                        </p>
                        <div class="flex items-center gap-3">
                            <span class="text-xl font-semibold px-3 py-1 rounded-lg" id="btcPriceChange"></span>
                            <span class="text-sm text-gray-400">24h Change</span>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-xs text-gray-500 mb-1">Last Updated</p>
                        <p class="text-sm font-mono text-gray-300" id="btcLastUpdate">--:--:--</p>
                        <p class="text-xs text-gray-500 mt-2">Data Points: <span class="text-orange-400 font-semibold" id="btcDataCount">0</span></p>
                    </div>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="backdrop-blur-sm bg-gray-800/50 rounded-2xl p-6 border border-gray-700 glow-orange">
                <div class="mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                    <h2 class="text-xl font-semibold text-gray-300">Price Chart</h2>
                    <div class="flex items-center gap-2 flex-wrap">
                        <!-- Timeframe Selector -->
                        <div class="flex items-center gap-1 bg-gray-700/50 rounded-lg p-1">
                            <button onclick="changeBtcTimeframe('1m')" id="btcBtn1m" class="timeframe-btn active px-3 py-1 rounded-md text-xs font-medium transition-all">1m</button>
                            <button onclick="changeBtcTimeframe('5m')" id="btcBtn5m" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">5m</button>
                            <button onclick="changeBtcTimeframe('15m')" id="btcBtn15m" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">15m</button>
                            <button onclick="changeBtcTimeframe('1h')" id="btcBtn1h" class="timeframe-btn px-3 py-1 rounded-md text-xs font-medium transition-all">1h</button>
                        </div>
                        <span class="px-2 py-1 bg-orange-500/20 rounded-md text-orange-400 text-xs">Live Updates</span>
                    </div>
                </div>
                <div class="relative">
                    <canvas id="btcChart"></canvas>
                </div>
            </div>
        </div>

    </div>

    <style>
        .timeframe-btn {
            color: #9ca3af;
        }
        .timeframe-btn:hover {
            color: white;
            background-color: rgba(75, 85, 99, 0.5);
        }
        .timeframe-btn.active {
            color: white;
            background-color: rgba(99, 102, 241, 0.5);
        }
    </style>

    <script>
        // ========== ETHEREUM CHART ==========
        const ethCtx = document.getElementById('ethChart').getContext('2d');
        let ethPriceData = [];
        let ethTimeLabels = [];
        let ethCurrentTimeframe = '1m';
        const ETH_MAX_DATA_POINTS = 100;

        const ethChart = new Chart(ethCtx, {
            type: 'line',
            data: {
                labels: ethTimeLabels,
                datasets: [{
                    label: 'ETH/USDT',
                    data: ethPriceData,
                    borderColor: 'rgb(99, 102, 241)',
                    backgroundColor: 'rgba(99, 102, 241, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: 'rgb(99, 102, 241)',
                    pointHoverBorderColor: 'white',
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                animation: { duration: 500 },
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(17, 24, 39, 0.9)',
                        titleColor: 'rgb(156, 163, 175)',
                        bodyColor: 'white',
                        borderColor: 'rgb(99, 102, 241)',
                        borderWidth: 1,
                        padding: 12,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.y.toLocaleString('en-US', {
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 2
                                });
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        ticks: {
                            color: '#9ca3af',
                            font: { size: 11 },
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        },
                        grid: { color: 'rgba(75, 85, 99, 0.2)', drawBorder: false },
                        border: { display: false }
                    },
                    x: {
                        ticks: { color: '#9ca3af', font: { size: 10 }, maxTicksLimit: 12 },
                        grid: { color: 'rgba(75, 85, 99, 0.2)', drawBorder: false },
                        border: { display: false }
                    }
                }
            }
        });

        // ========== BITCOIN CHART ==========
        const btcCtx = document.getElementById('btcChart').getContext('2d');
        let btcPriceData = [];
        let btcTimeLabels = [];
        let btcCurrentTimeframe = '1m';
        const BTC_MAX_DATA_POINTS = 100;

        const btcChart = new Chart(btcCtx, {
            type: 'line',
            data: {
                labels: btcTimeLabels,
                datasets: [{
                    label: 'BTC/USDT',
                    data: btcPriceData,
                    borderColor: 'rgb(249, 115, 22)',
                    backgroundColor: 'rgba(249, 115, 22, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: 'rgb(249, 115, 22)',
                    pointHoverBorderColor: 'white',
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                animation: { duration: 500 },
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(17, 24, 39, 0.9)',
                        titleColor: 'rgb(156, 163, 175)',
                        bodyColor: 'white',
                        borderColor: 'rgb(249, 115, 22)',
                        borderWidth: 1,
                        padding: 12,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.y.toLocaleString('en-US', {
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 2
                                });
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        ticks: {
                            color: '#9ca3af',
                            font: { size: 11 },
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        },
                        grid: { color: 'rgba(75, 85, 99, 0.2)', drawBorder: false },
                        border: { display: false }
                    },
                    x: {
                        ticks: { color: '#9ca3af', font: { size: 10 }, maxTicksLimit: 12 },
                        grid: { color: 'rgba(75, 85, 99, 0.2)', drawBorder: false },
                        border: { display: false }
                    }
                }
            }
        });

        // ========== ETHEREUM FUNCTIONS ==========
        function updateEthStatus(msg, isError = false) {
            const statusEl = document.getElementById('ethStatusMsg');
            statusEl.textContent = msg;
            statusEl.className = isError ? 'text-xs text-red-400' : 'text-xs text-gray-400';
        }

        async function loadEthHistoricalData(interval = '1m') {
            try {
                updateEthStatus('Loading...');
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=ETHUSDT&interval=${interval}&limit=100`);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const klines = await response.json();
                ethPriceData = [];
                ethTimeLabels = [];
                
                klines.forEach(kline => {
                    const timestamp = kline[0];
                    const closePrice = parseFloat(kline[4]);
                    const date = new Date(timestamp);
                    const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                    ethTimeLabels.push(timeStr);
                    ethPriceData.push(closePrice);
                });
                
                ethChart.data.labels = ethTimeLabels;
                ethChart.data.datasets[0].data = ethPriceData;
                ethChart.update();
                
                document.getElementById('ethDataCount').textContent = ethTimeLabels.length;
                updateEthStatus('Live');
                await getEth24hStats();
            } catch (error) {
                console.error('Error loading ETH historical data:', error);
                updateEthStatus('Error', true);
            }
        }

        function changeEthTimeframe(timeframe) {
            ethCurrentTimeframe = timeframe;
            
            // Update button states
            document.querySelectorAll('#ethBtn1m, #ethBtn5m, #ethBtn15m, #ethBtn1h').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`ethBtn${timeframe}`).classList.add('active');
            
            loadEthHistoricalData(timeframe);
        }

        async function getEth24hStats() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=ETHUSDT');
                const data = await response.json();
                const currentPrice = parseFloat(data.lastPrice);
                const change24h = parseFloat(data.priceChangePercent);
                
                document.getElementById('ethCurrentPrice').innerHTML = 
                    '<span class="text-gray-500">$</span>' + currentPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                
                const changeElement = document.getElementById('ethPriceChange');
                const changeText = Math.abs(change24h).toFixed(2) + '%';
                const arrow = change24h >= 0 ? 'â†‘' : 'â†“';
                changeElement.textContent = arrow + ' ' + changeText;
                changeElement.className = change24h >= 0 
                    ? 'text-xl font-semibold px-3 py-1 rounded-lg bg-green-500/20 text-green-400' 
                    : 'text-xl font-semibold px-3 py-1 rounded-lg bg-red-500/20 text-red-400';
            } catch (error) {
                console.error('Error fetching ETH 24h stats:', error);
            }
        }

        async function updateEthPrice() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=ETHUSDT');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const data = await response.json();
                const price = parseFloat(data.lastPrice);
                const change24h = parseFloat(data.priceChangePercent);
                const now = new Date();

                document.getElementById('ethCurrentPrice').innerHTML = 
                    '<span class="text-gray-500">$</span>' + price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                
                const changeElement = document.getElementById('ethPriceChange');
                const changeText = Math.abs(change24h).toFixed(2) + '%';
                const arrow = change24h >= 0 ? 'â†‘' : 'â†“';
                changeElement.textContent = arrow + ' ' + changeText;
                changeElement.className = change24h >= 0 
                    ? 'text-xl font-semibold px-3 py-1 rounded-lg bg-green-500/20 text-green-400' 
                    : 'text-xl font-semibold px-3 py-1 rounded-lg bg-red-500/20 text-red-400';

                document.getElementById('ethLastUpdate').textContent = now.toLocaleTimeString('en-US', { hour12: false });

                const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
                ethPriceData.push(price);
                ethTimeLabels.push(timeStr);

                if (ethPriceData.length > ETH_MAX_DATA_POINTS) {
                    ethPriceData.shift();
                    ethTimeLabels.shift();
                }

                ethChart.data.labels = ethTimeLabels;
                ethChart.data.datasets[0].data = ethPriceData;
                ethChart.update();
                
                document.getElementById('ethDataCount').textContent = ethPriceData.length;
                updateEthStatus('Live');
            } catch (error) {
                console.error('Error updating ETH price:', error);
                updateEthStatus('Error', true);
            }
        }

        // ========== BITCOIN FUNCTIONS ==========
        function updateBtcStatus(msg, isError = false) {
            const statusEl = document.getElementById('btcStatusMsg');
            statusEl.textContent = msg;
            statusEl.className = isError ? 'text-xs text-red-400' : 'text-xs text-gray-400';
        }

        async function loadBtcHistoricalData(interval = '1m') {
            try {
                updateBtcStatus('Loading...');
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=${interval}&limit=100`);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const klines = await response.json();
                btcPriceData = [];
                btcTimeLabels = [];
                
                klines.forEach(kline => {
                    const timestamp = kline[0];
                    const closePrice = parseFloat(kline[4]);
                    const date = new Date(timestamp);
                    const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                    btcTimeLabels.push(timeStr);
                    btcPriceData.push(closePrice);
                });
                
                btcChart.data.labels = btcTimeLabels;
                btcChart.data.datasets[0].data = btcPriceData;
                btcChart.update();
                
                document.getElementById('btcDataCount').textContent = btcTimeLabels.length;
                updateBtcStatus('Live');
                await getBtc24hStats();
            } catch (error) {
                console.error('Error loading BTC historical data:', error);
                updateBtcStatus('Error', true);
            }
        }

        function changeBtcTimeframe(timeframe) {
            btcCurrentTimeframe = timeframe;
            
            // Update button states
            document.querySelectorAll('#btcBtn1m, #btcBtn5m, #btcBtn15m, #btcBtn1h').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`btcBtn${timeframe}`).classList.add('active');
            
            loadBtcHistoricalData(timeframe);
        }

        async function getBtc24hStats() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT');
                const data = await response.json();
                const currentPrice = parseFloat(data.lastPrice);
                const change24h = parseFloat(data.priceChangePercent);
                
                document.getElementById('btcCurrentPrice').innerHTML = 
                    '<span class="text-gray-500">$</span>' + currentPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                
                const changeElement = document.getElementById('btcPriceChange');
                const changeText = Math.abs(change24h).toFixed(2) + '%';
                const arrow = change24h >= 0 ? 'â†‘' : 'â†“';
                changeElement.textContent = arrow + ' ' + changeText;
                changeElement.className = change24h >= 0 
                    ? 'text-xl font-semibold px-3 py-1 rounded-lg bg-green-500/20 text-green-400' 
                    : 'text-xl font-semibold px-3 py-1 rounded-lg bg-red-500/20 text-red-400';
            } catch (error) {
                console.error('Error fetching BTC 24h stats:', error);
            }
        }

        async function updateBtcPrice() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT');
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                
                const data = await response.json();
                const price = parseFloat(data.lastPrice);
                const change24h = parseFloat(data.priceChangePercent);
                const now = new Date();

                document.getElementById('btcCurrentPrice').innerHTML = 
                    '<span class="text-gray-500">$</span>' + price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                
                const changeElement = document.getElementById('btcPriceChange');
                const changeText = Math.abs(change24h).toFixed(2) + '%';
                const arrow = change24h >= 0 ? 'â†‘' : 'â†“';
                changeElement.textContent = arrow + ' ' + changeText;
                changeElement.className = change24h >= 0 
                    ? 'text-xl font-semibold px-3 py-1 rounded-lg bg-green-500/20 text-green-400' 
                    : 'text-xl font-semibold px-3 py-1 rounded-lg bg-red-500/20 text-red-400';

                document.getElementById('btcLastUpdate').textContent = now.toLocaleTimeString('en-US', { hour12: false });

                const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });
                btcPriceData.push(price);
                btcTimeLabels.push(timeStr);

                if (btcPriceData.length > BTC_MAX_DATA_POINTS) {
                    btcPriceData.shift();
                    btcTimeLabels.shift();
                }

                btcChart.data.labels = btcTimeLabels;
                btcChart.data.datasets[0].data = btcPriceData;
                btcChart.update();
                
                document.getElementById('btcDataCount').textContent = btcPriceData.length;
                updateBtcStatus('Live');
            } catch (error) {
                console.error('Error updating BTC price:', error);
                updateBtcStatus('Error', true);
            }
        }

        // ========== SCHEDULE UPDATES ==========
        function scheduleEthUpdate() {
            const randomInterval = Math.floor(Math.random() * 4000) + 1000;
            setTimeout(() => {
                updateEthPrice();
                scheduleEthUpdate();
            }, randomInterval);
        }

        function scheduleBtcUpdate() {
            const randomInterval = Math.floor(Math.random() * 4000) + 1000;
            setTimeout(() => {
                updateBtcPrice();
                scheduleBtcUpdate();
            }, randomInterval);
        }

        // ========== INITIALIZE ==========
        async function initialize() {
            await Promise.all([
                loadEthHistoricalData('1m'),
                loadBtcHistoricalData('1m')
            ]);
            scheduleEthUpdate();
            scheduleBtcUpdate();
        }

        initialize();
        console.log('ðŸš€ Crypto Live Charts initialized');
    </script>
</body>
</html>
